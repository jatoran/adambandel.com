/* valadezfamily/style.css */
:root {
  --primary-color: #3498db;
  --secondary-color: #2c3e50;
  --background-color: #ecf0f1;
  --text-color: #34495e;
  --accent-color: #3ce7de;
  --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  /* Define navbar height variable for calculations */
  --navbar-height: 60px; /* Default height, ensure matches navbar.css */
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.error-message {
  color: red;
  font-weight: bold;
  text-align: center;
  margin-top: 20px;
}

/* Darker background for specific page types */
body.page-slideshow,
body.page-video {
  background-color: #d8dcdf; /* Slightly darker grey, adjust as needed */
}

body, html {
  font-family: 'Lora', Arial, sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  line-height: 1.6;
  height: 100%;
  overflow-x: hidden;
}

body {
  display: flex;
  flex-direction: column;
}

header {
  background-color: var(--primary-color);
  color: white;
  text-align: center;
  padding: 1rem;
  box-shadow: var(--shadow);
  /* Ensure header shrinks if needed (relevant on landscape) */
  flex-shrink: 0;
}

h1 {
  font-size: clamp(1.5rem, 5vw, 2.5rem);
  margin-bottom: 0.5rem;
}

h3 {
  font-size: clamp(1rem, 3vw, 1.5rem);
  font-weight: normal;
}

/* Removed old nav styles related to month-nav */

main {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-y: auto; /* Allow vertical scroll for main content if needed */
  width: 100%; /* Ensure main takes full width */
  /* Default padding, specific pages might override or adjust */
  padding: 1rem;
}

/* --- Video Player Specific Styles --- */
main#video-main {
  flex-grow: 1; /* Allows main to take available space */
  display: flex;
  flex-direction: column;
  align-items: center; /* Center children horizontally */
  justify-content: center; /* Center vertically */
  padding: 1rem; /* Padding for spacing */
  width: 100%;
  box-sizing: border-box;
  overflow: hidden; /* Prevent content spilling out */
  min-height: 0; /* Allow main to shrink */
}

main#video-main h1.page-title#video-page-title {
  font-family: 'Lora', serif;
  color: var(--primary-color);
  text-align: center;
  margin-bottom: 1rem;
  flex-shrink: 0; /* Prevent title from shrinking vertically */
}

#video-container {
  border-radius: 10px;
  background-color: black; /* Ensure background is set */
  box-shadow: var(--shadow);
  overflow: hidden; /* Clip the video */
  position: relative; /* For potential future overlays */
  line-height: 0;     /* Remove extra space below video */
  width: 100%;        /* Take full width available in padded main */
  max-width: 1200px;  /* Optional max width */
  flex-shrink: 1; /* Allow this container to shrink if needed */
  flex-basis: auto; /* Base size determined by content */
  aspect-ratio: 16 / 9; /* Enforce video aspect ratio */
  height: auto; /* Height determined by width + aspect-ratio */
}

#video-player-element {
  display: block;
  width: 100%;
  height: 100%; /* Fill the aspect-ratio container */
  object-fit: contain; /* Scale video within bounds */
}

/* --- Slideshow Specific Styles --- */

/* Container for slideshow - This defines the fixed aspect ratio area */
#slideshow-container {
  width: 100%;            /* Take full available width */
  max-width: 1200px;       /* Limit maximum size */
  background-color: black; /* Black background for letterboxing */
  box-shadow: var(--shadow);
  border-radius: 10px;
  overflow: hidden;        /* Crucial: hide parts of image outside this box */
  position: relative;      /* Needed for positioning controls */
  margin: 0 auto 1rem auto;/* Center block element, add bottom margin */

  /* === Core of the fix: Maintain aspect ratio === */
  aspect-ratio: 16 / 9;     /* Enforce a 16:9 aspect ratio */
  /* Height is determined automatically by width and aspect-ratio */
  height: auto;
  /* =============================================== */

  /* Ensure flex settings for centering content inside */
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Div directly holding the image (optional, but used here) */
#slideshow {
  width: 100%;           /* Fill the container */
  height: 100%;          /* Fill the container */
  display: flex;         /* Use flex to easily center the image */
  justify-content: center;
  align-items: center;
}

/* Slideshow image itself */
#slideshow img {
  display: block;         /* Remove extra space below image */
  /* === Image Scaling === */
  max-width: 100%;      /* Don't exceed container width */
  max-height: 100%;     /* Don't exceed container height */
  width: auto;          /* Let the browser calculate width based on height */
  height: auto;         /* Let the browser calculate height based on width */
  object-fit: contain;  /* Scale image down to fit within container, maintaining its aspect ratio (causes letterboxing/pillarboxing) */
  /* ===================== */
}

/* --- Controls and Counter --- */
#controls {
  position: absolute;
  bottom: 0.5rem; /* Space from bottom */
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.3rem 0; /* Vertical padding */
  background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent background */
  z-index: 10; /* Ensure controls are above image */
  margin: 0;
  /* Optionally make controls rounded instead of full-width bar:
   left: 50%;
   transform: translateX(-50%);
   width: fit-content;
   padding: 0.3rem 1rem;
   border-radius: 20px;
  */
}

button {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.5rem;
  border-radius: 50%;
  cursor: pointer;
  transition: background-color 0.3s, transform 0.3s;
  opacity: 0.85; /* Slightly less transparent */
  width: 40px;
  height: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-shrink: 0; /* Prevent buttons shrinking */
}

button:hover, button:focus {
  background-color: var(--accent-color);
  transform: scale(1.1);
  opacity: 1;
}

.image-counter {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent background */
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 15px;
  font-size: 0.8rem;
  z-index: 10; /* Ensure counter is above image */
}


/* --- Animations --- */
.fade-in {
  animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* --- Swipe Areas (if used) --- */
.swipe-area {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 25%;
  z-index: 5; /* Below controls */
}

.swipe-left { left: 0; }
.swipe-right { right: 0; }

/* --- Responsive Design --- */

/* General Mobile Adjustments (Portrait & Landscape) */
@media (max-width: 768px) {
  main {
    padding: 0.5rem; /* Reduce padding on smaller screens */
  }

  #slideshow-container,
  #video-container {
    max-width: 100%; /* Use full width */
    border-radius: 0; /* Remove border radius */
    width: 100%; /* Ensure full width */
    margin-left: 0;
    margin-right: 0;
  }

  #slideshow-container {
    /* For slideshow, allow height to adjust based on aspect ratio & width */
    /* Aspect ratio is already set */
    max-height: 75vh; /* Optionally cap height */
  }

  #video-container {
     /* aspect-ratio is set, handles sizing */
     max-height: calc(100vh - var(--navbar-height) - 4rem); /* Cap video height more aggressively */
  }

  #controls {
    bottom: 0.5rem;
    gap: 0.25rem;
    padding: 0.2rem 0; /* Adjust padding */
  }

  button {
    width: 32px;
    height: 32px;
    font-size: 0.8rem; /* Adjust icon size potentially */
  }

  .past-newsletters a,
  .nav-links a {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
  }

  .image-counter {
    top: 0.5rem;
    right: 0.5rem;
    font-size: 0.7rem;
  }

  .nav-links { /* Stack links vertically */
      flex-direction: column;
      align-items: center;
  }
}


/* Mobile Landscape Specific Adjustments (Short & Wide Screens) */
@media (orientation: landscape) and (max-height: 500px) {
  body {
    /* Already flex-direction: column */
  }

  header {
    padding: 0.5rem;
  }
  /* Reduce header text size on specific pages in landscape */
  body.page-slideshow header h1,
  body.page-video header h1 {
    font-size: 1.1rem;
    margin-bottom: 0.1rem;
  }
  body.page-slideshow header h3#current-month {
    font-size: 0.8rem;
  }
  body.page-video header h1.page-title#video-page-title {
     /* Already covered by the general h1 rule above */
     margin-bottom: 0.25rem;
  }

  main {
    padding: 0.5rem; /* Consistent padding */
    /* justify-content: flex-start; */ /* Let content align top */
  }

  /* Container Constraints for Landscape */
  #slideshow-container {
    /* Height will be determined by aspect-ratio and width, BUT constrained by max-height */
    max-height: calc(100vh - var(--navbar-height) - 1rem); /* Max height allowed */
    /* aspect-ratio remains 16/9, but max-height takes precedence if viewport is too short */
    /* width will adjust accordingly if max-height limits the 16/9 shape */
  }

  #video-container {
     /* aspect-ratio is set, but max-height applies */
     max-height: calc(100vh - var(--navbar-height) - 3rem); /* Example: viewport - nav - title - margins */
  }

  /* Controls position fine */

  .past-newsletters {
    margin-top: 0.5rem;
  }
}

/* Very Small Mobile Portrait Adjustments */
@media (max-width: 480px) {
 /* Further adjustments if needed for very small screens */
}