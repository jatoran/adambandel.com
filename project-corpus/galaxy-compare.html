---
title: Galaxy Compare
summary: Interactive side‑by‑side spiral galaxy simulation to compare rotation curves, mass profiles, and stability techniques in real time.
tags: [Three.js, WebGL, Physics, Simulation, Vite, TypeScript, Barnes-Hut]
status: Active
date: 2025-09-29
cover_image: /project-corpus/placeholder.svg
alt: Side-by-side interactive spiral galaxies with GUI controls
permalink: /project-corpus/projects/galaxy-compare/
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} — Project</title>
    <meta name="description" content="{{ page.summary }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/project-corpus/assets-styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a href="/project-corpus/" style="text-decoration:none;color:var(--muted)">← Back to all projects</a>
        <h1 class="project-title">{{ page.title }}</h1>
        <p class="project-subtitle">{{ page.summary }}</p>
      </div>
    </header>
    <main class="container project-main">
      <section class="project-content">
        <div class="hero">
          <img src="{{ page.cover_image }}" alt="{{ page.alt }}" />
        </div>

        <h2>Problem</h2>
        <p>
          How do different galaxy parameters—like rotation curves, dark matter halo mass, and
          star–star interactions—shape large‑scale structure and stability over time? I wanted a
          hands‑on way to compare two scenarios side‑by‑side and iteratively tune parameters to see
          spiral arms emerge, warp, or dissipate in real time.
        </p>

        <h2>Approach</h2>
        <p>
          I built a client‑side, browser‑based simulator that renders two independent galaxies in a
          split‑screen layout. Each instance exposes the full parameter set via <code>lil-gui</code>
          with inline tooltips. Physics integrates a softened gravitational model with a
          Barnes–Hut octree for scalable star–star forces, plus a tunable dark matter halo and an
          optional central black hole to help preserve inner structure. For interactive demos, an
          <em>Orbit Maintenance</em> toggle can remove radial drift to keep disks stable during long runs.
        </p>

        <h3>Architecture</h3>
        <ul>
          <li>Two <code>GalaxySim</code> instances — isolated Three.js scenes with Cannon‑ES worlds.</li>
          <li>Barnes–Hut octree — rebuilt every <code>RebuildEvery</code> frames using <code>Theta</code> and <code>OctreeDepth</code> for accuracy/perf trade‑offs.</li>
          <li>Forces — dark matter halo (spherically symmetric), optional central black hole, optional star–star gravity.</li>
          <li>Rotation curves — <code>keplerian</code>, <code>flat</code>, and <code>solidBody</code> with configurable spin and velocity scatter.</li>
          <li>Rendering — GPU‑friendly <code>THREE.Points</code> with vertex colors and additive blending.</li>
          <li>UI — <code>lil‑gui</code> folders (Shape, Physics, BarnesHut, Integration, Spiral, Stability) with inline tooltips.</li>
        </ul>

        <h3>Stack</h3>
        <ul>
          <li>Three.js — High‑performance point cloud rendering and camera controls.</li>
          <li>Cannon‑ES — Lightweight rigid‑body integrator and vector math utilities.</li>
          <li>TypeScript — Strict types and maintainable simulation code.</li>
          <li>Vite — Fast dev server and optimized production build.</li>
          <li>lil‑gui — Parameter panels with categories and tooltips.</li>
        </ul>

        <h3>Challenges</h3>
        <ul>
          <li>Star–star collapse — mitigated with lower per‑star mass, reduced <code>G</code>, higher halo mass, and an optional central black hole.</li>
          <li>Scale and performance — Barnes–Hut approximation with rebuild cadence and softening (<code>Eps</code>) keeps orbits smooth at higher particle counts.</li>
          <li>Long‑run stability for demos — optional <em>Orbit Maintenance</em> removes radial velocity to preserve circular orbits (clearly labeled as a non‑physical cheat).</li>
          <li>Usability — tooltips and grouped folders make parameters discoverable without reading source.</li>
        </ul>

        <h2>Outcomes</h2>
        <p>
          The app enables rapid, visual comparison of galaxy setups. By toggling rotation curves and
          adjusting mass distributions, you can see how spiral arms tighten or shear and how disks
          stabilize with different halo/black‑hole configurations. On modern hardware, the default
          settings run interactively with thousands of particles per galaxy, and sliders allow
          exploring higher counts as performance permits.
        </p>

        <h2>Local Development</h2>
        <p>The simulator lives in the <code>galaxy/</code> subfolder and uses Vite.</p>
        <pre><code>cd galaxy
npm install
npm run dev   # start local dev server

# Production build
npm run build
npm run preview
</code></pre>

        <section class="updates">
          <h2>Updates</h2>
          {% assign updates_base = page.url | append: 'updates/' %}
          {% assign updates = site.pages | where_exp: 'u', "u.url contains updates_base" | sort: 'date' | reverse %}
          {% if updates.size > 0 %}
            {% for u in updates limit: 5 %}
              <article class="update">
                <h3><a href="{{ u.url }}">{{ u.title }}</a></h3>
                {% if u.date %}<time datetime="{{ u.date | date_to_xmlschema }}">{{ u.date | date: '%b %d, %Y' }}</time>{% endif %}
                {% if u.excerpt %}<p>{{ u.excerpt }}</p>{% endif %}
              </article>
            {% endfor %}
          {% else %}
            <p>No updates yet.</p>
          {% endif %}
        </section>
      </section>
      <aside class="project-aside">
        <dl class="facts">
          <dt>Status</dt>
          <dd><span class="badge status {{ page.status | downcase }}">{{ page.status }}</span></dd>
          <dt>Tags</dt>
          <dd>{{ page.tags | join: ', ' }}</dd>
          <dt>Started</dt>
          <dd>{{ page.date | date: '%b %Y' }}</dd>
          <dt>Links</dt>
          <dd>
            <ul>
              <li><a href="#">Live demo (TBD)</a></li>
              <li><a href="#">GitHub (TBD)</a></li>
            </ul>
          </dd>
        </dl>
      </aside>
    </main>
    <footer class="site-footer">
      <div class="container">
        <small>© {{ "now" | date: "%Y" }} Adam Bandel</small>
      </div>
    </footer>
  </body>
  </html>

