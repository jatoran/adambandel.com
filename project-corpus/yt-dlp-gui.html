---
title: Video Downloader & Clip Processor (yt-dlp + ffmpeg)
summary: Desktop GUI to batch download, trim, optionally concatenate, remove audio, compress, and tag videos using yt-dlp, ffmpeg, and HandBrake.
tags: [Python, GUI, yt-dlp, ffmpeg, HandBrake, Tkinter]
status: Active
date: 2025-09-29
cover_image: /project-corpus/placeholder.svg
alt: Application UI placeholder for the Video Downloader & Clip Processor
permalink: /project-corpus/projects/yt-dlp-gui/
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} — Project</title>
    <meta name="description" content="{{ page.summary }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/project-corpus/assets-styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a href="/project-corpus/" style="text-decoration:none;color:var(--muted)">← Back to all projects</a>
        <h1 class="project-title">{{ page.title }}</h1>
        <p class="project-subtitle">{{ page.summary }}</p>
      </div>
    </header>
    <main class="container project-main">
      <section class="project-content">
        <div class="hero">
          <img src="{{ page.cover_image }}" alt="{{ page.alt }}" />
        </div>

        <h2>Problem</h2>
        <p>
          Collecting small, high‑quality clips from long videos across different sites is slow and repetitive. You often need to
          download the source, trim one or more time ranges, optionally stitch segments together, remove audio for some clips,
          compress to consistent settings, and keep links/titles attached as metadata. Doing that step‑by‑step in separate tools
          is error‑prone and wastes time.
        </p>

        <h2>Approach</h2>
        <p>
          I built a desktop GUI that orchestrates <em>yt‑dlp</em> for retrieval, <em>ffmpeg</em> for slicing/concats, <em>HandBrakeCLI</em> for
          compression, and <em>mutagen</em> for MP4 metadata. Users queue multiple videos, define per‑video time ranges, and pick
          options (combine segments, remove audio, compress). Progress and logs stream in real time, with background threads
          keeping the UI responsive. Input state persists to JSON so sessions can resume where they left off.
        </p>

        <h3>Architecture</h3>
        <ul>
          <li>GUI — <code>gui.py</code> with <em>ttkbootstrap</em> (Tkinter): queue of entries, time‑range editor, per‑video progress, log panel.</li>
          <li>Processing — <code>download_manager.VideoProcessor</code>: yt‑dlp download, ffmpeg trim, optional concat, HandBrake compression, metadata.</li>
          <li>Persistence — <code>metadata_manager.py</code>: saves/loads entries to <code>current-inputs.json</code>.</li>
          <li>Logging — <code>logger.ThreadSafeLogger</code>: queue‑based, rotating file logs + safe GUI updates.</li>
          <li>Utilities — <code>utils.py</code>: time parsing, filename sanitizing, unique‑name generation.</li>
          <li>External tools — requires <code>yt-dlp</code>, <code>ffmpeg</code>, and <code>HandBrakeCLI</code> in <code>PATH</code>.</li>
        </ul>

        <h3>Stack</h3>
        <ul>
          <li>Python 3.12 — core language/runtime.</li>
          <li>ttkbootstrap (Tkinter) — modern desktop UI themeing and widgets.</li>
          <li>yt‑dlp — robust cross‑site video retrieval with progress hooks.</li>
          <li>ffmpeg — precise trimming (<code>-ss</code>/<code>-to</code>) and fast concat.</li>
          <li>HandBrakeCLI — consistent, portable compression via preset import.</li>
          <li>mutagen — MP4 metadata (title, URL fields, comments, date).</li>
        </ul>

        <h3>Key Features</h3>
        <ul>
          <li>Multi‑video queue with per‑item options: combine segments, remove audio, compress, custom filename.</li>
          <li>Time‑range editor with scroll/drag controls and add/remove range buttons.</li>
          <li>Real‑time phase/progress (Retrieving Info → Downloading → Extracting/Concatenating → Compressing).</li>
          <li>Thread‑safe logging to file and in‑app console; responsive UI during processing.</li>
          <li>Persistent state in <code>current-inputs.json</code> to resume/carry lists between sessions.</li>
          <li>Output hygiene: sanitized names, collision‑proof unique filenames, temp cleanup.</li>
        </ul>

        <h3>Challenges</h3>
        <ul>
          <li>Reliable progress reporting — tapped yt‑dlp hooks and posted updates safely to Tk via <code>.after()</code>.</li>
          <li>Cross‑platform process UX — suppressed console windows on Windows and normalized tool invocation on PATH.</li>
          <li>Segment handling — balanced speed/quality for trims and concat while keeping metadata intact.</li>
          <li>Concurrency — avoided UI freezes using worker threads and a queued logger to prevent race conditions.</li>
        </ul>

        <h2>Outcomes</h2>
        <p>
          The tool turns a multi‑step manual workflow into a single queued pipeline. It reduces context switching, enforces
          consistent output settings via a HandBrake preset, and attaches source/title metadata to the resulting MP4 files.
          For typical 1–3 segment clips, the process runs unattended with clear progress and an audit trail in logs.
        </p>

        <h3>How It Works (High‑Level)</h3>
        <pre><code>1) yt-dlp: download best mp4/m4a to temp
2) ffmpeg: for each time range, extract segment(s)
3) optional concat: merge segments losslessly when combining
4) optional remove audio: fast stream copy without audio
5) optional compress: HandBrakeCLI using imported preset
6) embed metadata: title + source URL into MP4
7) cleanup: temp files removed; outputs moved to downloads/
        </code></pre>

        <h3>Configuration</h3>
        <ul>
          <li>Compression preset: <code>handbrake-preset.json</code> (includes <em>h264 22RF AAC 720x480</em>).</li>
          <li>Outputs: <code>downloads/</code> (configurable from the UI).</li>
          <li>Temp workspace: <code>temp/</code> for staging and concat lists.</li>
          <li>Logs: <code>logs/application.log</code> with rotation.</li>
        </ul>

        <section class="updates">
          <h2>Updates</h2>
          {% assign updates_base = page.url | append: 'updates/' %}
          {% assign updates = site.pages | where_exp: 'u', "u.url contains updates_base" | sort: 'date' | reverse %}
          {% if updates.size > 0 %}
            {% for u in updates limit: 5 %}
              <article class="update">
                <h3><a href="{{ u.url }}">{{ u.title }}</a></h3>
                {% if u.date %}<time datetime="{{ u.date | date_to_xmlschema }}">{{ u.date | date: '%b %d, %Y' }}</time>{% endif %}
                {% if u.excerpt %}<p>{{ u.excerpt }}</p>{% endif %}
              </article>
            {% endfor %}
          {% else %}
            <p>No updates yet.</p>
          {% endif %}
        </section>
      </section>
      <aside class="project-aside">
        <dl class="facts">
          <dt>Status</dt>
          <dd><span class="badge status {{ page.status | downcase }}">{{ page.status }}</span></dd>
          <dt>Tags</dt>
          <dd>{{ page.tags | join: ', ' }}</dd>
          <dt>Started</dt>
          <dd>{{ page.date | date: '%b %Y' }}</dd>
          <dt>Links</dt>
          <dd>
            <ul>
              <li><a href="#">Live demo (TBD)</a></li>
              <li><a href="#">GitHub (this repo)</a></li>
            </ul>
          </dd>
        </dl>
      </aside>
    </main>
    <footer class="site-footer">
      <div class="container">
        <small>© {{ "now" | date: "%Y" }} Adam Bandel</small>
      </div>
    </footer>
  </body>
  </html>

