---
title: Gallery of Conceptual Lenses
summary: Generate relevant, diverse conceptual “lenses” from a rich taxonomy to analyze any problem; CLI + Streamlit UI with embedding-driven selection and UMAP visualizations.
tags: [AI, Embeddings, Visualization, UMAP, Streamlit, Prompt-Engineering, Taxonomy, Diversity-Selection, Python]
status: Active
date: 2025-05-18
cover_image: /project-corpus/placeholder.svg
alt: Abstract network of nodes showing diverse conceptual clusters representing lenses
permalink: /project-corpus/projects/gallery-of-conceptual-lenses/
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title }} — Project</title>
    <meta name="description" content="{{ page.summary }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/project-corpus/assets-styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a href="/project-corpus/" style="text-decoration:none;color:var(--muted)">← Back to all projects</a>
        <h1 class="project-title">{{ page.title }}</h1>
        <p class="project-subtitle">{{ page.summary }}</p>
      </div>
    </header>
    <main class="container project-main">
      <section class="project-content">
        <div class="hero">
          <img src="{{ page.cover_image }}" alt="{{ page.alt }}" />
        </div>

        <h2>Problem</h2>
        <p>
          Many research and product questions benefit from exploring multiple
          perspectives. Experts often “change lenses” to reveal new angles, but doing this
          systematically is hard: it’s easy to miss relevant frames, over-index on familiar
          ones, or end up with near-duplicates. The goal is to generate a small set of
          <em>relevant, diverse, and named</em> lenses that help analyze any input problem
          and guide brainstorming, critique, or prompt construction.
        </p>

        <h2>Approach</h2>
        <p>
          The system builds lenses from a curated taxonomy (e.g., disciplines, frameworks,
          rhetoric styles, personas). It embeds the problem and all taxonomy values, forms
          candidate lenses by combining value parts, filters by relevance (cosine similarity),
          then picks a diverse subset by maximizing separation distance. It exports a compact
          prompt and optionally visualizes the landscape with UMAP.
        </p>

        <h3>How It Works</h3>
        <ol>
          <li>Load taxonomy from <code>lenses_config.py</code> and pre-embed unique values with caching.</li>
          <li>Embed the problem statement using OpenAI or a local SentenceTransformer.</li>
          <li>Generate candidate lenses by combining parts across selected “knobs”.</li>
          <li>Compute each lens vector as the mean of its part embeddings.</li>
          <li>Filter candidates by relevance to the problem (cosine similarity threshold).</li>
          <li>Select up to <code>max_lenses</code> that are far apart (diversity via min separation).</li>
          <li>Output a named list plus a ready-to-use prompt; optionally render UMAP and a heatmap.</li>
        </ol>

        <h3>Usage</h3>
        <p>CLI (auto-uses the default problem if omitted):</p>
        <pre><code>python main.py \
  --problem "Explain the impact of social media on modern politics." \
  --knobs framework_or_theory rhetoric_style \
  --multi-knob-combos 2 \
  --max-lenses 8 \
  --relevance-threshold 0.15 \
  --separation-threshold 0.15
        </code></pre>
        <p>Streamlit UI:</p>
        <pre><code>streamlit run main.py -- --problem "Your problem here"</code></pre>
        <p>Local embeddings (optional):</p>
        <pre><code>python main.py --use-local-model --local-model-name all-MiniLM-L6-v2 --problem "..."</code></pre>

        <h3>Architecture</h3>
        <ul>
          <li><strong>TaxonomyManager</strong> — Loads the taxonomy and pre-embeds all unique values; normalizes strings; caches embeddings to <code>embedding_cache/</code>.</li>
          <li><strong>Candidate generation</strong> — <code>iter_candidate_lens_parts</code> yields value-part combos across selected knobs; supports deterministic shuffling with <code>--random-seed</code> and sampling via <code>--max-candidates-to-evaluate</code>.</li>
          <li><strong>Scoring</strong> — Relevance filter (<code>step3</code>) using cosine similarity; diversity selection (<code>step4</code>) maximizing minimum pairwise distance with guardrails (token-length and problem-similarity ceiling).</li>
          <li><strong>Visualization</strong> — Plotly UMAP scatter for problem/chosen/relevant/irrelevant points and a seaborn heatmap for pairwise distances.</li>
          <li><strong>Interfaces</strong> — CLI via <code>argparse</code> and a Streamlit app mirroring all key controls.</li>
          <li><strong>Prompt/export</strong> — Generates a concise prompt listing chosen lenses; can export selections and all relevant candidates to JSON for downstream use.</li>
        </ul>

        <h3>Stack</h3>
        <ul>
          <li>Python 3.12 — Core runtime.</li>
          <li>OpenAI Embeddings or SentenceTransformers — Vectorization (defaults: <code>text-embedding-3-large</code> or <code>all-MiniLM-L6-v2</code>).</li>
          <li>NumPy, scikit-learn — Vector ops and cosine similarity.</li>
          <li>UMAP-learn — Dimensionality reduction for visualization.</li>
          <li>Plotly, seaborn, matplotlib — Interactive and static plots.</li>
          <li>tiktoken — Token-budget checks for lens name lengths.</li>
          <li>Streamlit — Interactive UI; mirrors CLI controls.</li>
          <li>pickle + on-disk cache — Fast, reproducible runs via cached embeddings.</li>
        </ul>

        <h3>Challenges</h3>
        <ul>
          <li><strong>Combinatorial growth</strong> — Mitigated by sampling (<code>--max-candidates-to-evaluate</code>) and knob selection.</li>
          <li><strong>Reproducibility</strong> — Deterministic shuffling with <code>--random-seed</code> and persistent caches.</li>
          <li><strong>Name practicalities</strong> — Lens names must fit a token budget; constrained with tiktoken-aware checks.</li>
          <li><strong>Model portability</strong> — Local/GPU fallback logic ensures CPU-only environments still work.</li>
          <li><strong>Relevance vs. diversity</strong> — Dynamic threshold raises relevance for multi-part lenses; diversity enforced by minimum separation.</li>
        </ul>

        <h2>Outcomes</h2>
        <p>
          The tool consistently produces compact sets of lenses that are both pertinent and
          meaningfully different. Pre-embedding the taxonomy makes subsequent runs fast; the
          UMAP plot provides an intuitive sanity check for relevance and spread. The exported
          prompt and JSON outputs integrate cleanly with downstream ideation, critique, and
          prompt-engineering workflows.
        </p>

        <section class="updates">
          <h2>Updates</h2>
          {% assign updates_base = page.url | append: 'updates/' %}
          {% assign updates = site.pages | where_exp: 'u', "u.url contains updates_base" | sort: 'date' | reverse %}
          {% if updates.size > 0 %}
            {% for u in updates limit: 5 %}
              <article class="update">
                <h3><a href="{{ u.url }}">{{ u.title }}</a></h3>
                {% if u.date %}<time datetime="{{ u.date | date_to_xmlschema }}">{{ u.date | date: '%b %d, %Y' }}</time>{% endif %}
                {% if u.excerpt %}<p>{{ u.excerpt }}</p>{% endif %}
              </article>
            {% endfor %}
          {% else %}
            <p>No updates yet.</p>
          {% endif %}
        </section>
      </section>

      <aside class="project-aside">
        <dl class="facts">
          <dt>Status</dt>
          <dd><span class="badge status {{ page.status | downcase }}">{{ page.status }}</span></dd>

          <dt>Tags</dt>
          <dd>{{ page.tags | join: ', ' }}</dd>

          <dt>Started</dt>
          <dd>{{ page.date | date: '%b %Y' }}</dd>

          <dt>Links</dt>
          <dd>
            <ul>
              <li><a href="#">Live demo (TBD)</a></li>
              <li><a href="#">GitHub (TBD)</a></li>
            </ul>
          </dd>

          <dt>Run Locally</dt>
          <dd>
            <pre><code>streamlit run main.py -- --problem "Your problem here"</code></pre>
          </dd>
        </dl>
      </aside>
    </main>
    <footer class="site-footer">
      <div class="container">
        <small>© {{ "now" | date: "%Y" }} Adam Bandel</small>
      </div>
    </footer>
  </body>
  </html>

